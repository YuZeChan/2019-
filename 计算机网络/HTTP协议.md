### HTTP协议：

​	协议是什么：协议是指计算机通信网络中两台计算机之间进行通信所必须共同遵守的规定或规则。

​	HTTP协议：是一种详细规定了**浏览器**和**万维网服务器**之间相互通信的规则，通过Internet传送**万维网文档**的数据传输协议。

​	HTTP灵活简单快速，应用广泛。浏览器（**文本先于图形显示**），qq，迅雷等都是用了http协议。



***

#### HTTP协议工作流程：

​	HTTP协议（80）在应用层，是基于TCP协议的。

​	HTTPS协议（443）同处于应用层，是基于TLS、SSL表示层加密，TCP协议传输的。



一次HTTP操作称为一个事务，工作流程可分为四步：

1. 首先客户机与服务器需要建立连接
2. 建立连接后，苦于机发送一个请求给服务器（URL、协议版本号、请求方式、主体信息）
3. 服务器接收到请求，给予相应的响应信息（协议版本号、状态码、主体信息）
4. 客户机接收到服务器返回的信息，通过浏览器显示，断开连接。



​	HTTP 协议**永远都是客户端发起请求，服务器回送响应**，这样就会使得无法实现客户端未发起的请求，而服务器将消息推送给客户端（http2.0后服务器可以主动推送信息）。 





##### 

***

#### HTTP协议结构：

​	无论是请求报文还是响应报文，都分为以下四部分：

1. 请求（响应）行
2. 0个或多个请求头
3. 空行（作为请求头的结束）
4. 可选消息体

**HTTP是基于行的协议，每一行以\r\n作为分隔符。**



URL长度：浏览器：2k字节；服务器最多处理：64k字节

***

HTTP请求：

​	请求行(line)：method、url、Http版本。

​	请求头(header)：附加信息（请求约束）。

​	请求体(body)：主体数据。	

***

HTTP响应：

​	响应行(line)：状态码、状态码原因短语、Http版本。

​	响应头（header）：附加信息

​	响应主体（body）：主体数据。	



##### HTTP请求方法：

( 1 ) OPTIONS ：返回服务器**针对特定资源**所支持的 HTTP 请求方法；也可以利用向 Web服务器发送“＊”的请求来测试服务器的功能性。

( 2) HEAD ：向服务器索要与 GET 请求相一致的响应，只不过**响应体将不会被返回**。这一方法可以在不必传输整个响应内容的情况下，就可以获取包含在响应消息头中的元信息 。该方法**常用于测试超链接的有效性，是否可以访问，以及最近是否更新等信息** 。

( 3) GET ：**向特定的资源发出请求** 。 注意 ： GET 方法不应当被用于产生“副作用”的操作中，例如在 web app中的应用，其中一个原因是 GET 可能会被网络蜘蛛等随意访问 。

( 4 ) POST ：**向指定资源提交数据进行处理请求（**例如提交表单或者上传文件）。 数据被包含在请求体中 。 POST 请求可能会导致新的资源的建立或对已有资源的修改 。

( 5 ) PUT ：向指定资源位置**上传**其最新内容 。

( 6) DELETE ： 请求服务器**删除** Request-URI 所标识的资源 。

( 7 ) TRACE ：**回显**服务器收到的请求，**主要用于测试或诊断**。

( 8) CONNECT: HTTP/ 1.1 协议中预留给能够**将连接改为管道方式**的代理服务器 。

( 9) PATCH ：用来将**局部修改应用**于某一资源，该操作添加于规范盯C5789 中 。 



##### HTTP常见请求头：

​	Host：用于指定被请求资源的Internet主机和端口号，他通常从HTTP URL中抽取出来。如“http://www.baidu.com//favicon.ico”其中host为“Host：http://www.baidu.com”，端口号默认80。

​	Connection：通常为两个值keep-alive和close

​	Accept：浏览器端可以接收的MIME类型（*MIME* (Multipurpose Internet Mail Extensions) 是**描述消息内容类型的因特网标准**）

​	Cache-Control：指定请求和响应遵循的缓存机制

​	Accept-Encoding ：浏览器声明自己可接收的编码方法，通常说明是否支持压缩并指定压缩方法。（如Servlet可以支持gzip编码，减少下载时间）

​	Accept-Language：浏览器声明自己接收的语言 。 

​	Accept-Charset：浏览器可接受的字符集 。 	

​	User-Agent：用于告诉HTTP服务器，客户端使用的**操作系统和浏览器的名称和版本** 。 

​	If-Modified-Since ：把浏览器端缓存页面的最后修改时间发送到服务器去，服务器会把这个时间与服务器上实际文件的最后修改时间进行对比 。 如果时间一致，那么返回 304 状态，客户端就直接使用本地缓存文件；如果时间不一致，就会返回 200 状态和新的文件内容 。 客户端接到之后，会丢弃旧文件，把新文件缓存起来，井显示在浏览器中 。 	

​	If-None-Match: If-None-Match 和 **ETag** 一起工作，工作原理是在 HTTP Response 中添加ETag 信息 。当用户再次请求该资源时，将在 HTTP Request 中加入 If-None-Match信息（Etag的值）。如果服务器验证资源的 ETag 没有改变（该资源没有更新），将返回一个 304 状态告诉客户端使用本地缓存文件 。 否则将返回 200 状态和新的资源和 Etag。 使用这样的机制可以提高网站的性能 。 

​	Content-Type  

​	Content-Length：表示请求消息正文的长度 。

​	Cookie：最重要的请求头之一，用于将 cookie 的值发送给 HTTP 服务器 。 



***

#### HTTP响应报文：



##### 响应行返回码：

1. lxx ：指示信息，表示请求已接收，继续处理。
2. 2xx ：成功，表示请求已被成功接收、理解 、 接受 。
3. 3xx ：重定向，要完成请求必须进行更进一步的操作 。
4. 4xx ：客户端错误，请求有语法错误或请求无法实现。
5. 5xx ：服务器端错误，服务器未能实现合法的请求 。 

![响应行状态码](/resources/响应行状态码.jpg)

##### 响应头字段：

​	Date：表示消息发送的时间

​	Server：指明Web服务器用来**处理请求的软件信息**（如：Server: Apache-Coyote/1 . 1  ）

​	Accept-Ranges：Web 服务器表明自己**是否接收获取其某个实体的一部分**（比如文件的一部分）的请求 。 bytes 表示接收， none 表示不接收。 

​	Content-Encoding : Web 服务器表明自己使用了什么压缩方法（ gzip, deflate）压缩响应中的对象。

​	Content-Length: Web 服务器告诉浏览器自己响应的对象的长度 。

​	Content-Type: Web 服务器告诉浏览器自己响应的对象的类型 。 



***

#### HTTPS:

​	在网络上，两个实体之间的通信会面临什么样的安全问题呢？最常见的是被**窃听**，只要你的数据在网络上传输，就有可能被窃昕，窃听者可能把窃听到的数据进行**篡改 、 伪造**，再传送给下一个人。 

​	HTTPS = HTTP + TLS（SSL的升级版）

​	TLS（Transport Layer Security）传输层安全协议。TLS协议可用于保护正常运行于TCP上的任何应用协议通信。如HTTP，FTP，SMTP等。(**这里比较重要的是，TSL/SSL应该属于会话层~~我理解其实再见连接（交换公私钥）的过程实际上是建立会话的过程)**

其优点是：它是与应用层协议无关的，高层应用协议透明的建立在TLS协议之上。

TLS 协议使用通信双方的**客户证书以及 CA 根证书**，允许客户端、服务器端以一种不能被偷昕的方式通信，在通信双方间建立起一条安全的、可信任的**通信通道** 。 

![HTTPS](/resources/HTTPS.jpg)

##### HTTPS 和 HTTP 的区别:

1. HTTPS 协议需要到 **CA 申请证书**， 一般免费证书很少，需要交费 。
2. HTTP 是超文本传输协议，**信息是明文传输**， HTTPS 则是具有安全性的 ssl 加密传
   输协议。
3. HTTP 和 HTTPS 使用的是完全不同的连接方式，用的端口也不一样，**前者是80,后者是443** 。
4.  HTTP 的连接很简单， 是无状态的； HTTPS 协议是由 SSL+HTTP 协议构建的可进
   行**加密传输 、身份认证**的网络协议，比 HTTP 协议安全。
5. 目前， HTTPS 的应用比 HTTP 的少， 是因为 HTTPS 比较**耗性能**，对于安全性没那么高要求的应用来说，用 HTTP 就已经够了 。 





***

#### CGI：

CGI（Common Gate Interface 通用网关接口）：本质是一段运行在服务器上的程序，如HTTP服务器，提供同客户端HTML页面的接口。

