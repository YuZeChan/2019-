### Linux系统体系架构：分为用户态和内核态

![用户态和内核态1](/resources/用户态和内核态1.png)

内核态：控制和管理计算机的硬件资源，并为上层的应用程序提供运行环境。

用户态：应用程序的活动空间，必须依赖于内核提供的资源。

系统调用：内核为上层应用提供的访问接口，使得用户态能访问到内核态（硬件）资源。



***

##### 三者的关系：

![用户态和内核态2](/resources/用户态和内核态2.png)

**系统调用是操作系统中的最小功能单位。**

> - 系统调用与上层应用程序的关系：
>    如果将系统调用比作是一个“比画”，那么上层应用就是一个“汉字”。如果完成一个“汉字”，就需要通过多个系统调用。

> - **系统调用与公用函数库的关系：**
>    公用函数库实现对系统调用的封装，将**简单的业务逻辑接口**呈现给用户，方便用户调用，从这个角度上看，库函数就像是组成汉字的“偏旁”。（也就类似STL，封装了一系列系统调用，方便使用）



***

##### 用户态切换到内核态的三种情况：

系统调用、异常、设备中断。

- 系统调用：进程主动请求调用某种资源。
- 异常事件：发生不可预知的异常事件，比如**缺页异常**。
- 外设中断：当外围设备完成用户的请求操作后，会向CPU发出中断信号，此时，CPU就会暂停执行下一条即将要执行的指令，**转而**去执行中断信号对应的处理程序，如果先前执行的指令是在用户态下，则自然就发生从用户态到内核态的转换。



***

##### 用户态和内核态的区别：

这个问题多半从特权级上的不同来回答。

内核态受到计算机信任，可以调用一些特权指令，这些指令往往比较危险，如果错误调用会导致系统崩溃。

用户态则只能调用一些特权级低的指令，通常不会对系统造成危害。

