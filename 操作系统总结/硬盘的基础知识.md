### 硬盘基础知识简介：

***



##### 主要分为五个部分：

- 盘片（platter）
- 磁头（head）
- 磁道（track）
- 扇区（sector）
- 柱面（cylinder）

***

##### 盘片和磁头：

​	磁盘中一般会有多个盘片组成，每个盘片包含两个面，每个盘面都对应地有一个读/写磁头。受到硬盘整体体积和成本的限制，一般都在五片以内，盘片的编号自下而上从0开始，5号结束。

![磁盘](/resources/磁盘.png)

***

##### 扇区和磁道：

​	在一个盘面上，有一个个灰色的同心圆，为一条条磁道。

​	从圆心向外画直线，可以将磁道分为若干个弧，每个弧段称为一个扇区。（扇区是磁盘的最小组成单元，通常为512Byte，由于容量的不断提升，部分厂商将每个扇区设为4096Byte）

![扇区和磁道](/resources/扇区和磁道.png)

***

##### 磁头和柱面：

​	硬盘通常由重叠的一组盘片构成，每个盘面都被划分成数目相等的磁道，从外向内从0开始依次编号，具有相同编号的磁道形成一个圆柱，称之为磁盘的柱面。

​	磁盘的柱面数与一个盘面上的磁道数是相等的。由于每个磁盘都有自己的磁头，因此，盘面数等于总的磁头数。（5*2个以内，一个盘片有两个盘面，随发展变化）

![磁头和柱面](/resources/磁头和柱面.png)

***

##### 磁盘容量计算:

存储容量 ＝ 磁头数 × 磁道(柱面)数 × 每道扇区数 × 每扇区字节数

图中磁盘是一个 3个圆盘6个磁头，7个柱面（每个盘片7个磁道） 的磁盘，每条磁道有12个扇区，所以此磁盘的容量为：

存储容量 6 * 7 * 12 * 512 = 258048

> 每个磁道的扇区数一样是说的老的硬盘，外圈的密度小，内圈的密度大，每圈可存储的数据量是一样的。**新的硬盘数据的密度都一致，这样磁道的周长越长，扇区就越多，存储的数据量就越大。**



***

##### 磁盘读取响应时间:

1. 寻道时间：磁头从开始移动到数据所在磁道所需要的时间，寻道时间越短，I/O操作越快，目前磁盘的平均寻道时间一般在3－15ms，一般都在10ms左右。
2. 旋转延迟：盘片旋转将请求数据所在扇区移至读写磁头下方所需要的时间，旋转延迟取决于磁盘转速。普通硬盘一般都是7200rpm，慢的5400rpm。
3. 数据传输时间：完成传输所请求的数据所需要的时间。
   小结一下：从上面的指标来看、其实最重要的、或者说、我们最关心的应该只有两个：寻道时间；旋转延迟。

> 读写一次磁盘信息所需的时间可分解为：**<u>寻道时间、延迟时间</u>、传输时间**。为提高磁盘传输效率，软件应着重考虑减少寻道时间和延迟时间。



***

## 块/簇:

##### 概述:

磁盘块/簇（虚拟出来的）。 块是操作系统中最小的逻辑存储单位。操作系统与磁盘打交道的最小单位是磁盘块。
通俗的来讲，在Windows下如NTFS等文件系统中叫做**簇**；在Linux下如Ext4等文件系统中叫做**块（block）**。每个簇或者块可以包括2、4、8、16、32、64…2的n次方个扇区。

##### 为什么存在磁盘块？

读取方便：由于扇区的数量比较小，数目众多在寻址时比较困难，所以操作系统就将**相邻的扇区组合**在一起，形成一个块，再对块进行整体的操作。

分离对底层的依赖：操作系统忽略对底层物理存储结构的设计。通过虚拟出来磁盘块的概念，在系统中认为块是最小的单位。

##### page

操作系统经常与内存和硬盘这两种存储设备进行通信，类似于“块”的概念，都需要一种虚拟的基本单位。所以，与内存操作，是虚拟一个页的概念来作为最小单位。与硬盘打交道，就是以块为最小单位。



***

## 扇区、块/簇、page的关系

1. 扇区： 硬盘的最小读写单元
2. 块/簇： 是操作系统针对硬盘读写的最小单元
3. page： 是内存与操作系统之间操作的最小单元。

<u>**扇区 <= 块/簇 <= page**</u>