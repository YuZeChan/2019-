# 死锁的检测和解除：

***

##### 死锁的检测：<u>资源分配图法</u>

例：![有环死锁图](/resources/有环死锁图.jpg)

有环死锁图



![有环无死锁](/resources/有环无死锁.jpg)

有环无死锁



***

**边集中各边的含义：**

- 分配边：资源实例–>进程 的一条有向边 <rj,pi>
- 申请边： 进程–>资源类 的一条有向边 <pi,rj>



**<u>死锁定理</u>：**

- 如果资源分配图中**没有环路**，则系统中没有死锁，如果图中存在环路则系统中可能存在死锁。
- 如果每个资源类中只包含一个资源实例，则环路是死锁存在的充分必要条件。



**资源分配图化简：**

- 找一个非孤立、只有分配边的进程结点，去掉分配边，将其变为孤立结点；
- 再把相应的资源分配给一个等待该资源的进程，即将某进程的申请边变为分配边；
- 重复以上步骤，若所有进程都可成为孤立结点，称该图是可完全简化的，否则称该图是不可完全简化的。 

死锁状态的充分条件是：资源分配图是不可完全简化的。
--------------------- 



***

##### 死锁的解除：

重要的是以最小的代价解除死锁，恢复系统运行。方法如下：

- **撤消所有**的死锁进程
- **连续撤消死锁进程**直至不再存在死锁
- **连续剥夺资源**直到不再存在死锁
- 把每个死锁进程备份到前面定义的某个检查点，并**重新启动所有进程**